{"version":3,"file":"instrument.js","sources":["instrument.ts"],"sourceRoot":"/","sourcesContent":["import * as Sentry from '@sentry/node';\nimport servicesDB from './db/services.js';\nimport serverInfo from './serverInfo.json' with { type: 'json' };\nimport logger from './logger.js';\n\n\n\nconst inDevMode = process.env.MODE === 'dev' || process.env.ENV === 'local';\n\nexport const initSentry = () => {\n  logger.debug('Initializing sentry...');\n  Sentry.init({\n    dsn: 'https://228d64fe4724349cb4a82b982c7b1133@o4510246020710401.ingest.us.sentry.io/4510252638666752',\n    enableLogs: true,\n    // Setting this option to true will send default PII data to Sentry.\n    // For example, automatic IP address collection on events\n    sendDefaultPii: false,\n    tracesSampleRate: 1.0,\n    initialScope: {\n      tags: {\n        ...serverInfo,\n        environment: inDevMode ? 'development' : 'production',\n      }\n    },\n  });\n};\n\nawait servicesDB.read();\n// if (!inDevMode && servicesDB.data.sentryLogging.enabled) {\nif (servicesDB.data.sentryLogging.enabled) {\n  initSentry();\n}\n"],"names":[],"mappings":";;AAAA,OAAO,KAAK,MAAM,MAAM,cAAc,CAAC;AACvC,OAAO,UAAU,MAAM,kBAAkB,CAAC;AAC1C,OAAO,UAAU,MAAM,mBAAmB,CAAC,OAAO,IAAI,EAAE,MAAM,EAAE,CAAC;AACjE,OAAO,MAAM,MAAM,aAAa,CAAC;AAIjC,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,KAAK,KAAK,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,OAAO,CAAC;AAE5E,MAAM,CAAC,MAAM,UAAU,GAAG,GAAG,EAAE;IAC7B,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;IACvC,MAAM,CAAC,IAAI,CAAC;QACV,GAAG,EAAE,iGAAiG;QACtG,UAAU,EAAE,IAAI;QAChB,oEAAoE;QACpE,yDAAyD;QACzD,cAAc,EAAE,KAAK;QACrB,gBAAgB,EAAE,GAAG;QACrB,YAAY,EAAE;YACZ,IAAI,EAAE;gBACJ,GAAG,UAAU;gBACb,WAAW,EAAE,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,YAAY;aACtD;SACF;KACF,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,UAAU,CAAC,IAAI,EAAE,CAAC;AACxB,6DAA6D;AAC7D,IAAI,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;IAC1C,UAAU,EAAE,CAAC;AACf,CAAC","debug_id":"fd348813-afbb-59b7-9c37-6d603faa0dc0"}