{"version":3,"file":"memoryDB.js","sources":["db/memoryDB.ts"],"sourceRoot":"/","sourcesContent":["// This is for storing data in memory when we don't want to update any files in the config.dbFolder\n// Updating files in the config.dbFolder will re-trigger job deletion and creation\n// This only keeps track of if the alarm is running, since we can't get that programmatically from the pod\nimport { Low, Memory } from 'lowdb';\n\ntype SideState = {\n  isAlarmVibrating: boolean;\n  analyzeSleep: {\n    lastRan?: number;\n  }\n};\n\ntype MemoryDB = {\n  left: SideState;\n  right: SideState;\n};\n\nconst defaultMemoryDB: MemoryDB = {\n  left: {\n    isAlarmVibrating: false,\n    analyzeSleep: {\n      lastRan: undefined,\n    }\n  },\n  right: {\n    isAlarmVibrating: false,\n    analyzeSleep: {\n      lastRan: undefined,\n    }\n  },\n};\n\nconst adapter = new Memory<MemoryDB>();\nconst memoryDB = new Low<MemoryDB>(adapter, defaultMemoryDB);\n\nawait memoryDB.read();\nmemoryDB.data = memoryDB.data || defaultMemoryDB;\nawait memoryDB.write();\n\nexport default memoryDB;\n"],"names":[],"mappings":"AAAA,mGAAmG;AACnG,kFAAkF;AAClF,0GAA0G;;;AAC1G,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAcpC,MAAM,eAAe,GAAa;IAChC,IAAI,EAAE;QACJ,gBAAgB,EAAE,KAAK;QACvB,YAAY,EAAE;YACZ,OAAO,EAAE,SAAS;SACnB;KACF;IACD,KAAK,EAAE;QACL,gBAAgB,EAAE,KAAK;QACvB,YAAY,EAAE;YACZ,OAAO,EAAE,SAAS;SACnB;KACF;CACF,CAAC;AAEF,MAAM,OAAO,GAAG,IAAI,MAAM,EAAY,CAAC;AACvC,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAW,OAAO,EAAE,eAAe,CAAC,CAAC;AAE7D,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AACtB,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,eAAe,CAAC;AACjD,MAAM,QAAQ,CAAC,KAAK,EAAE,CAAC;AAEvB,eAAe,QAAQ,CAAC","debug_id":"f11a6139-adf3-56e4-96d0-343e6e6e5756"}