{"version":3,"file":"schedulesSchema.js","sources":["db/schedulesSchema.ts"],"sourceRoot":"/","sourcesContent":["// WARNING! - Any changes here MUST be the same between app/src/api & server/src/db/\n\nimport { z } from 'zod';\nconst timeRegexFormat = /^([01]\\d|2[0-3]):([0-5]\\d)$/;\nexport const SideSchema = z.enum(['right', 'left']);\n\n\n// Reusable Zod type for time\nexport const TimeSchema = z.string().regex(timeRegexFormat, 'Invalid time format, must be HH:mm');\nexport const TemperatureSchema = z.number().int().min(55).max(110);\n\n\nexport const AlarmSchema = z.object({\n  vibrationIntensity: z.number().int().min(1).max(100),\n  vibrationPattern: z.enum(['double', 'rise']),\n  duration: z.number().int().positive().min(0).max(180),\n}).strict();\n\nexport const AlarmJobSchema = AlarmSchema.extend({\n  side: SideSchema,\n  force: z.boolean().optional(),\n}).strict();\n\nexport const AlarmScheduleSchema = AlarmSchema.extend({\n  time: TimeSchema,\n  enabled: z.boolean(),\n  alarmTemperature: TemperatureSchema,\n}).strict();\n\n\n\nexport const DailyScheduleSchema = z.object({\n  temperatures: z.record(\n    TimeSchema,\n    TemperatureSchema,\n  ),\n  alarm: AlarmScheduleSchema,\n  power: z.object({\n    on: TimeSchema,\n    off: TimeSchema,\n    onTemperature: TemperatureSchema,\n    enabled: z.boolean(),\n  }),\n}).strict();\n\n// Define the SideSchedule schema\nexport const SideScheduleSchema = z.object({\n  sunday: DailyScheduleSchema,\n  monday: DailyScheduleSchema,\n  tuesday: DailyScheduleSchema,\n  wednesday: DailyScheduleSchema,\n  thursday: DailyScheduleSchema,\n  friday: DailyScheduleSchema,\n  saturday: DailyScheduleSchema,\n}).strict();\n\n\n// Define the Schedules schema\nexport const SchedulesSchema = z.object({\n  left: SideScheduleSchema,\n  right: SideScheduleSchema,\n}).strict();\n\nexport type DailySchedule = z.infer<typeof DailyScheduleSchema>;\nexport type SideSchedule = z.infer<typeof SideScheduleSchema>;\nexport type Schedules = z.infer<typeof SchedulesSchema>;\nexport type Alarm = z.infer<typeof AlarmSchema>;\nexport type AlarmJob = z.infer<typeof AlarmJobSchema>;\nexport type AlarmSchedule = z.infer<typeof AlarmScheduleSchema>;\nexport type Time = z.infer<typeof TimeSchema>;\n\n// eslint-disable-next-line @typescript-eslint/no-type-alias\nexport type DayOfWeek = keyof SideSchedule;\n// eslint-disable-next-line @typescript-eslint/no-type-alias\n// export type Side = keyof Schedules;\nexport type Side = z.infer<typeof SideSchema>;\n"],"names":[],"mappings":"AAAA,oFAAoF;;;AAEpF,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AACxB,MAAM,eAAe,GAAG,6BAA6B,CAAC;AACtD,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;AAGpD,6BAA6B;AAC7B,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,eAAe,EAAE,oCAAoC,CAAC,CAAC;AAClG,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAGnE,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC;IAClC,kBAAkB,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;IACpD,gBAAgB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IAC5C,QAAQ,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;CACtD,CAAC,CAAC,MAAM,EAAE,CAAC;AAEZ,MAAM,CAAC,MAAM,cAAc,GAAG,WAAW,CAAC,MAAM,CAAC;IAC/C,IAAI,EAAE,UAAU;IAChB,KAAK,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CAC9B,CAAC,CAAC,MAAM,EAAE,CAAC;AAEZ,MAAM,CAAC,MAAM,mBAAmB,GAAG,WAAW,CAAC,MAAM,CAAC;IACpD,IAAI,EAAE,UAAU;IAChB,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE;IACpB,gBAAgB,EAAE,iBAAiB;CACpC,CAAC,CAAC,MAAM,EAAE,CAAC;AAIZ,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC1C,YAAY,EAAE,CAAC,CAAC,MAAM,CACpB,UAAU,EACV,iBAAiB,CAClB;IACD,KAAK,EAAE,mBAAmB;IAC1B,KAAK,EAAE,CAAC,CAAC,MAAM,CAAC;QACd,EAAE,EAAE,UAAU;QACd,GAAG,EAAE,UAAU;QACf,aAAa,EAAE,iBAAiB;QAChC,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE;KACrB,CAAC;CACH,CAAC,CAAC,MAAM,EAAE,CAAC;AAEZ,iCAAiC;AACjC,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAAC,CAAC,MAAM,CAAC;IACzC,MAAM,EAAE,mBAAmB;IAC3B,MAAM,EAAE,mBAAmB;IAC3B,OAAO,EAAE,mBAAmB;IAC5B,SAAS,EAAE,mBAAmB;IAC9B,QAAQ,EAAE,mBAAmB;IAC7B,MAAM,EAAE,mBAAmB;IAC3B,QAAQ,EAAE,mBAAmB;CAC9B,CAAC,CAAC,MAAM,EAAE,CAAC;AAGZ,8BAA8B;AAC9B,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,CAAC,MAAM,CAAC;IACtC,IAAI,EAAE,kBAAkB;IACxB,KAAK,EAAE,kBAAkB;CAC1B,CAAC,CAAC,MAAM,EAAE,CAAC","debug_id":"ea58dc83-8f79-5277-9f1f-c28054af9a80"}